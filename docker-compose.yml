version: '3.8'

services:
  arevei-cloud:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: arevei-cloud-app
    ports:
      - "5000:5000"
    environment:
      - NODE_ENV=production
      - PORT=5000
      - DATABASE_URL=postgresql://neondb_owner:npg_zBZoVi9S5Xeg@ep-misty-cherry-ad9je1om-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require
      # Users can override this with -e flag in docker run or in .env file
      - AREVEI_STORAGE_PATH=/data/arevei-cloud/uploads

    volumes:
      # Users can modify this path or use docker run -v for custom directories
      - ${AREVEI_HOST_STORAGE_PATH:-~/.arevei-cloud/uploads}:/data/arevei-cloud/uploads
    restart: unless-stopped
    networks:
      - arevei-network

networks:
  arevei-network:
    driver: bridge
